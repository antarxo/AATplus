:root{
  --aat-dw: 1403;
  --aat-dh: 648;
  --aat-scale: 1;
  --aat-vh0: calc(var(--aat-dh) * 1px / 100);
  --aat-vw0: calc(var(--aat-dw) * 1px / 100);

  --foyer-h: 445px;
}
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
}

html{
  background:#000;
}

body{
  margin:0;
  position:fixed;
  left:var(--aat-vvoffx, 0px);
  top:var(--aat-vvoffy, 0px);
  width:var(--aat-vvw, 100vw);
  height:var(--aat-vvh, 100vh);
  background:radial-gradient(circle at center,#222 0%,#000 100%);
  overflow:hidden;
  font-family:Inter,system-ui,sans-serif;
  color:#fff;
}


.stage{
  position:absolute;
  left:50%;
  top:50%;
  width:calc(var(--aat-dw) * 1px);
  height:calc(var(--aat-dh) * 1px);
  transform:translate(-50%,-50%) scale(var(--aat-scale));
  transform-origin:center center;
  overflow:hidden;
  background:radial-gradient(circle at center,#222 0%,#000 100%);
}

/* ÎšÎ¿Ï…ÏÏ„Î¯Î½ÎµÏ‚ */
.curtain-top,
.curtain-upper,
.curtain-side{
  position:absolute;
  transition:transform 1.2s cubic-bezier(.2,.9,.2,1),opacity 1s,filter .8s ease;
}
.curtain-top{
  top:0;
  left:0;
  width:100%;
  height:calc(26% - 22px);
  background:linear-gradient(to bottom,#230000,#180000);
  box-shadow:0 5px 18px rgba(0,0,0,.8);
  z-index:160;
}
.curtain-upper{
  top:calc(26% - 16px);
  left:0;
  width:100%;
  height:calc(44% + 24px);
  background:
    url('courtin.png') center top/cover no-repeat,
    linear-gradient(to bottom,#8b0000,#400000);
  transform-origin:top;
  z-index:160;
}
.stage.open .curtain-upper{
  transform:translateY(calc(-100% + 10px));
}
.curtain-side{
  top:0;
  height:100%;
  width:18%;
  z-index:160;
}
.curtain-side.left{
  left:0;
  background:linear-gradient(to right,#300000,#1a0000);
  box-shadow:inset -6px 0 10px rgba(0,0,0,.6);
}
.curtain-side.right{
  right:0;
  background:linear-gradient(to left,#300000,#1a0000);
  box-shadow:inset 6px 0 10px rgba(0,0,0,.6);
}

.spotlight{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:150;
  opacity:.25;
  background:radial-gradient(200px 120px at 50% 60%, rgba(255,255,220,.65), rgba(255,255,220,0) 70%);
}

/* Î£ÎºÎ·Î½Î® â€“ ÎµÎ»Î±Ï„Î®ÏÎ¹Î¿, Î·Î¸Î¿Ï€Î¿Î¹ÏŒÏ‚, Î´Î¬Ï€ÎµÎ´Î¿ */


/* ===============================
   DRIVER MECH (Scotch yoke) â€” Phase 1
   Î¤Î± 4 PNG (table/troxos/slider/peiros) Î­Ï‡Î¿Ï…Î½ Î¯Î´Î¹Î¿ canvas (196Ã—306) ÎºÎ±Î¹ Ï„Î¿Ï€Î¿Î¸ÎµÏ„Î¿ÏÎ½Ï„Î±Î¹ overlay.
   Î£Î·Î¼ÎµÎ¯Ï‰ÏƒÎ·: Î¿ Ï€ÎµÎ¯ÏÎ¿Ï‚ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¯Î½Î±Î¹ Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï„Î¿Î½ slider (z-index).
   =============================== */

.driver-mech{
  position:absolute;
  inset:0;
  pointer-events:none;
}

.driver-mech img{
  position:absolute;
  /* default ÎºÎ»Î¯Î¼Î±ÎºÎ± (ÏÏ…Î¸Î¼Î¯Î¶ÎµÏ„Î±Î¹ ÎµÏÎºÎ¿Î»Î± Î±ÏÎ³ÏŒÏ„ÎµÏÎ±) */
  width:227px;  /* â†“ ~20px Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ¿ ÏÏˆÎ¿Ï‚ */
  height:auto;
  pointer-events:none;
  user-select:none;
  -webkit-user-drag:none;
}

.drv-table{  z-index:154; }
.drv-wheel{  z-index:155; transform-origin:50% 50%; }
.drv-slider{ z-index:156; }
.drv-pin{    z-index:157; }


.spring{
  position:absolute;
  bottom:calc(calc(32 * var(--aat-vh0)) + 92px);
  left:10%;
  height:96px;
  width:auto;
  z-index:156; /* ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ ÎºÎ¿Ï…ÏÏ„Î¯Î½Î± (160), Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï€Î¬Ï„Ï‰Î¼Î± (155) */
  pointer-events:none;
  filter:drop-shadow(0 4px 6px rgba(0,0,0,.55));
  transform-origin:left center;
  display:none; /* Act 2 Î¼ÏŒÎ½Î¿ */
}

.actor{
  position:absolute;
  bottom:calc(calc(32 * var(--aat-vh0)) + 135px);
  left:50%;
  width:144px;
  height:96px;
  z-index:157; /* Î·Î¸Î¿Ï€Î¿Î¹ÏŒÏ‚ > ÎµÎ»Î±Ï„Î®ÏÎ¹Î¿ */
  pointer-events:none;
}
.actor img{
  width:100%;
  height:auto;
  display:block;
  filter:drop-shadow(0 4px 6px rgba(0,0,0,.6));
}

.floor{
  position:absolute;
  left:18%;
  width:64%;
  bottom:calc(calc(32 * var(--aat-vh0)) - 8px);
  height:2px;
  background:#aaa;
  z-index:155;
  pointer-events:none;
}

/* ÎšÎ¿Î¹Î½ÏŒ */

.audience-main{
  position:absolute;
  left:18%;
  width:64%;
  bottom:0;
  height:auto;
  object-fit:contain;
  object-position:bottom center;
  z-index:1500;
  pointer-events:none;
}

.audience-extra{
  position:absolute;
  left:18%;
  width:64%;
  bottom:0;
  height:auto;
  object-fit:contain;
  object-position:bottom center;
  opacity:.9;
  z-index:980;
  pointer-events:none;
}

/* ÎŸÎ¼Î¹Î»Î·Ï„Î­Ï‚ / Î¸ÎµÎ±Ï„Î­Ï‚ */

.viewers{
  position:absolute;
  left:0;
  width:100%;
  bottom:0;
  height:260px;          /* Î£Ï„Î±Î¸ÎµÏÏŒ ÏÏˆÎ¿Ï‚ ÏÏƒÏ„Îµ Î½Î± Ï‡Ï‰ÏÎ¬Î½Îµ Ï„Î± avatars */
  z-index:1400;          /* Ï€Î¯ÏƒÏ‰ Î±Ï€ÏŒ koino.png */
  pointer-events:none;
  overflow:visible;
}

.viewer-avatar{
  position:absolute;
  width:140px;           /* Î£Î—ÎœÎ‘ÎÎ¤Î™ÎšÎŸ: ÏŒÏ‡Î¹ auto, Î±Î»Î»Î¹ÏÏ‚ 0px ÎºÎ±Î¹ ÎµÎ¾Î±Ï†Î±Î½Î¯Î¶Î¿Î½Ï„Î±Î¹ */
  height:calc(22 * var(--aat-vh0));           /* default, Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î±Î»Î»Î¬Î¾ÎµÎ¹ Î±Ï€ÏŒ JSON */
  overflow:visible;
  border-radius:0;
  border:none;
  box-shadow:none;
  background:transparent center bottom/contain no-repeat; /* PNG Î´Î¹Î±Ï†Î±Î½Î® */
  transform:translateX(-50%); /* Ï„Î¿ left Î¿ÏÎ¯Î¶ÎµÎ¹ Ï„Î¿ ÎºÎ­Î½Ï„ÏÎ¿ */
  opacity:0;
  transition:opacity .5s ease;
}

/* Î¤Î±Î¼Ï€Î­Î»Î± Ï„Î¯Ï„Î»Î¿Ï… */

.signboard{
  position:absolute;
  top:0;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.4);
  border-radius:10px;
  padding:12px 18px;
  color:#ddd;
  font-family:'Georgia',serif;
  text-align:center;
  z-index:170;
  line-height:1.25;
}
.signboard h1{
  font-size:28px;
  margin:0;
  color:#fff;
}
.signboard .sb-lineA{
  font-size:16px;
  font-style:italic;
  margin-top:2px;
  color:#ddd;
}
.signboard .sb-lineB{
  font-size:16px;
  margin-top:2px;
}
.signboard .sb-lineB .hl{
  color:#ffd27a;
  font-weight:600;
}
.signboard .sb-lineC{
  font-size:15px;
  margin-top:2px;
  font-weight:700;
  color:#fff;
}
.signboard .sb-lineD{
  font-size:13px;
  margin-top:2px;
  font-style:italic;
  opacity:.9;
}

/* Î¡Î¿Î»ÏŒÎ¹ / ÎœÎµÏ„ÏÎ®ÏƒÎµÎ¹Ï‚ / xâ€“t / xâ€“sin(Ï‰t) / Params */

.clock{
  position:absolute;
  top:10px;
  right:auto;
  left:0;
  background:rgba(0,0,0,.5);
  color:#fff;
  padding:6px 10px;
  font-size:15px;
  font-family:"Courier New",monospace;
  border-radius:6px;
  border:1px solid rgba(255,255,255,.3);
  z-index:265;
  pointer-events:none;
  display:none;
  min-width:220px;       /* Î¯Î´Î¹Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ Î¼Îµ Î´ÎµÎ¾Î¹Î¬ ÏƒÏ„Î®Î»Î· */
  text-align:center;     /* ÎºÎµÎ½Ï„ÏÎ¬ÏÎ¹ÏƒÎ¼Î± Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ panel */
}
.clock .hint{
  font-size:10px;
  color:#ffd27a;
  opacity:.9;
  margin-left:6px;
}

.measure-box{
  position:absolute;
  right:auto;
  left:0;
  top:44px;
  width:220px;
  z-index: 2200;
  background:rgba(0,0,0,.55);
  color:#fff;
  border:1px solid rgba(255,255,255,.25);
  border-radius:8px;
  padding:6px 8px;
  display:none;
  max-height:calc(25 * var(--aat-vh0));      /* Ï€Î¹Î¿ Ï‡Î±Î¼Î·Î»ÏŒÏ‚ Ï€Î¯Î½Î±ÎºÎ±Ï‚ */
  overflow-y:auto;
  font-size:12px;
}
.measure-box .mb-title{
  font-weight:700;
  margin:0 0 6px 0;
  font-size:13px;
}
.measure-box table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  font-size:12px;
}
.measure-box thead th{
  position:sticky;
  top:0;
  background:rgba(0,0,0,.8);
  z-index:1;
}
.measure-box th,
.measure-box td{
  border-bottom:1px solid rgba(255,255,255,.2);
  padding:2px 4px;
  text-align:right;
}
.measure-box th:first-child,
.measure-box td:first-child{
  text-align:center;
}
.measure-box tr.new td{
  background:rgba(255,210,122,.2);
  transition:background .6s ease;
}

/* Î“ÏÎ¬Ï†Î·Î¼Î± xâ€“t */
#xtChart{
  position:absolute;
  right:auto;
  left:0;
  width:220px;           /* Ï€Î¹Î¿ ÏƒÏ„ÎµÎ½ÏŒ, ÎµÏ…Î¸Ï…Î³ÏÎ±Î¼Î¼Î¹ÏƒÎ¼Î­Î½Î¿ Î¼Îµ measure-box/params */
  height:120px;          /* Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ¿ ÏÏˆÎ¿Ï‚ */
  top:calc(44px + calc(28 * var(--aat-vh0)) + 8px);
  display:none;
  z-index: 2200;
  border:1px dashed rgba(255,255,255,.25);
  pointer-events:none;
}

/* Î“ÏÎ¬Ï†Î·Î¼Î± xâ€“sin(Ï‰t) */
#xSinChart{
  position:absolute;
  right:auto;
  left:0;
  width:220px;           /* Î¯Î´Î¹Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ */
  height:120px;          /* Î¯Î´Î¹Î¿ Î¼Î¹ÎºÏÏŒ ÏÏˆÎ¿Ï‚ */
  top:calc(44px + calc(28 * var(--aat-vh0)) + 8px + 120px + 8px);
  display:none;
  z-index: 2200;
  border:1px dashed rgba(255,255,255,.25);
  pointer-events:none;
}

/* Î Î¯Î½Î±ÎºÎ±Ï‚ A, Ï‰, Ï†â‚€ */
.params-box{
  position:absolute;
  right:auto;
  left:0;
  top:calc(44px + calc(28 * var(--aat-vh0)) + 8px + 120px + 8px + 120px + 8px);
  z-index: 2199;
  background:rgba(0,0,0,.6);
  color:#fff;
  border:1px solid rgba(255,255,255,.25);
  border-radius:8px;
  padding:6px 10px;
  font-size:13px;
  line-height:1.45;
  display:none;
  min-width:220px;
}

/* ÎÏŒÎ¼Î¿Î¹ & mini Î´Î¹Î±Î³ÏÎ¬Î¼Î¼Î±Ï„Î± */

.laws{
  position:absolute;
  left:10px;
  top:44px;
  width:225px;
  background:rgba(20,0,0,.7);
  color:#fff;
  border:1px solid rgba(255,200,200,.3);
  border-radius:8px;
  padding:6px 8px;
  font-size:14px;
  line-height:1.45;
  z-index: 2200;
  display:none;
}
.laws h4{
  margin:0 0 6px 0;
  font-size:14px;
}
.laws-body .law-line{
  padding:4px 6px;
  margin:2px 0;
  border-left:3px solid rgba(255,210,122,.7);
  background:rgba(255,210,122,.15);
}
.law-charts{
  position:absolute;
  left:10px;
  top:calc(44px + 220px);
  width:225px;
  z-index: 2200;
  transform:translateY(-80px); /* Î»Î¯Î³Î¿ Ï€Î¹Î¿ ÎºÎ¬Ï„Ï‰ Î³Î¹Î± Î½Î± ÏƒÎºÎµÏ€Î¬Î¶Î¿Î½Ï„Î±Î¹ Î»Î¹Î³ÏŒÏ„ÎµÏÎ¿ */
}
.law-charts canvas{
  display:block;
  margin-top:6px;
  background:rgba(0,0,0,.5);
  border-radius:6px;
}

/* Ruler & marker */

.ruler{
  position:absolute;
  left:18%;
  width:64%;
  bottom:calc(calc(32 * var(--aat-vh0)) - 8px + 1px);
  height:24px;
  font-size:10px;
  font-family:"Courier New",monospace;
  color:#aaa;
  pointer-events:none;
  z-index:  159;
}
.ruler::before{
  content:'';
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  height:1px;
  background:#aaa;
}
.tick{
  position:absolute;
  bottom:0;
  width:1px;
  height:10px;
  background:#aaa;
}
.tick-label{
  position:absolute;
  bottom:12px;
  transform:translateX(-50%);
  font-size:10px;
  color:#aaa;
  white-space:nowrap;
}

.marker{
  position:absolute;
  bottom:calc(calc(32 * var(--aat-vh0)) - 8px + 1px);
  width:0;
  height:80px;
  transform:translateX(-50%);
  pointer-events:none;
  z-index:158; /* Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Î·Î¸Î¿Ï€Î¿Î¹Î¿ÏÏ‚, ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ ÎºÎ¿Ï…ÏÏ„Î¯Î½Î± */
  opacity:0;
  transition:opacity .3s;
}
.marker-line{
  position:absolute;
  left:50%;
  bottom:8px;
  width:2px;
  height:70px;
  background:#ffd27a;
  box-shadow:0 0 4px rgba(255,210,122,.8);
  transform:translateX(-50%);
}
.marker-tip{
  position:absolute;
  left:50%;
  bottom:0;
  width:0;
  height:0;
  border-left:6px solid transparent;
  border-right:6px solid transparent;
  border-top:8px solid #ffd27a;
  filter:drop-shadow(0 2px 2px rgba(255,210,122,.8));
  transform:translateX(-50%);
}

/* Bubbles */

@keyframes popIn{
  0%{transform:scale(.9);opacity:0}
  60%{transform:scale(1.04);opacity:1}
  100%{transform:scale(1);opacity:1}
}
.thought-bubble{
  position:absolute;
  max-width:520px;
  background:rgba(255,255,255,.95);
  color:#000;
  font-size:15px;
  line-height:1.45;
  padding:10px 12px 12px;
  border-radius:10px;
  box-shadow:0 6px 12px rgba(0,0,0,.4);
  z-index:2101;
  pointer-events:none;
  opacity:0;
  display:none;
  transition:opacity .25s ease, transform .25s ease;
}
.thought-bubble.active{
  display:block;
  opacity:1;
  animation:popIn .25s ease;
}
.thought-bubble.closing{
  opacity:0;
}
.thought-bubble .text{
  word-wrap:break-word;
}
.thought-bubble .checkmark{
  position:absolute;
  top:-8px;
  right:-8px;
  background:#2ecc71;
  color:#fff;
  font-size:11px;
  line-height:1;
  border-radius:50%;
  border:1px solid rgba(0,0,0,.4);
  width:18px;
  height:18px;
  display:none;
  align-items:center;
  justify-content:center;
  font-family:system-ui,sans-serif;
  font-weight:600;
}

.act-bubble,
.foyer-bubble{
  position:absolute;
  display:none;
  pointer-events:none;
  min-width:120px;
  text-align:center;
  color:#fff;
  font-weight:800;
  font-size:13px;
  padding:6px 12px;
  border-radius:999px;
  border:2px solid rgba(255,255,255,.65);
  box-shadow:0 6px 14px rgba(0,0,0,.5);
  letter-spacing:0.03em;
  text-shadow:0 1px 2px rgba(0,0,0,.7);
  background:rgba(0,0,0,.7);
}
.act-bubble{
  z-index:2101;
}
.foyer-bubble{
  z-index:2101;
}

/* Controls */

.controls{
  position:absolute;
  bottom:12px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.7);
  border:1px solid rgba(255,255,255,.25);
  border-radius:8px;
  padding:6px 8px;
  display:flex;
  gap:8px;
  z-index:2000;
}
.controls button{
  background:none;
  border:0;
  color:#fff;
  font-size:16px;
  line-height:1;
  cursor:pointer;
  min-width:32px;
  min-height:32px;
  border-radius:4px;
  padding:4px 6px;
}
.controls button.active{
  background:rgba(255,255,255,.2);
}

.btn-end{
  position:absolute;
  bottom:12px;
  right:12px;
  z-index:2000;
  background:#333;
  border:1px solid rgba(255,255,255,.25);
  color:#fff;
  border-radius:8px;
  padding:8px 12px;
  cursor:pointer;
}

.btn-foyer{
  position:absolute;
  bottom:12px;
  left:12px;
  z-index:2000;
  background:#333;
  border:1px solid rgba(255,255,255,.25);
  color:#fff;
  border-radius:8px;
  padding:8px 12px;
  cursor:pointer;
}

/* ğŸ”´ ÎÎ•ÎŸ: ÎšÎ¿Ï…Î¼Ï€Î¯ Î²Î¹Î²Î»Î¯Î¿Ï… Ï€Î±ÏÎ¬ÏƒÏ„Î±ÏƒÎ·Ï‚ */
.btn-book{
  position:absolute;
  bottom:52px;           /* Î»Î¯Î³Î¿ Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï„Î¿ Î¦Î¿Ï…Î±Î³Î¹Î­ */
  left:12px;
  z-index:2000;
  background:#333;
  border:1px solid rgba(255,255,255,.25);
  color:#fff;
  border-radius:8px;
  padding:8px 12px;
  cursor:pointer;
}
.btn-book:hover{
  background:#700;
}

/* Start + countdown */

.start-btn{
  background:#700;
  color:#fff;
  border:none;
  border-radius:8px;
  padding:10px 16px;
  font-size:16px;
  cursor:pointer;
}

.countdown-overlay{
  position:absolute;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,.65);
  color:#fff;
  display:none;
  align-items:center;
  justify-content:center;
  text-align:center;
  z-index:900;
  pointer-events:none;
  font-family:Inter,system-ui,sans-serif;
}
.countdown-box{
  max-width:80%;
}
.countdown-main{
  font-size:24px;
  font-weight:600;
  margin-bottom:8px;
  color:#fff;
}
.countdown-sub{
  font-size:14px;
  color:#ffd27a;
  margin-bottom:16px;
}
.countdown-timer{
  font-family:"Courier New",monospace;
  font-size:40px;
  font-weight:700;
  color:#fff;
}

/* Act break / foyer break */

.actbreak,
.foyerbreak,
.startbreak{
  position:absolute;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:transparent; /* ÏŒÏ‡Î¹ full dark overlay */
  color:#fff;
  z-index:410;
  display:none;
  align-items:center;
  justify-content:center;
  text-align:center;
  pointer-events:none;
}
.startbreak{ display:flex; }

.actbreak .box,
.foyerbreak .box,
.startbreak .box{
  pointer-events:auto;
  background:rgba(0,0,0,.8);
  border:1px solid rgba(255,255,255,.25);
  border-radius:12px;
  padding:16px 20px;
  max-width:520px;
  margin:auto;
}
.actbreak h3,
.foyerbreak h3,
.startbreak h3{
  margin-bottom:8px;
}
.actbreak p,
.foyerbreak p,
.startbreak p{
  margin-bottom:16px;
}
.actbreak button,
.foyerbreak button,
.startbreak button{
  background:#700;
  color:#fff;
  border:none;
  border-radius:8px;
  padding:10px 16px;
  font-size:16px;
  cursor:pointer;
}

/* Î¦Î¿Ï…Î±Î³Î¹Î­ */

.foyer{
  position:absolute;
  left:18%;
  width:64%;
  top:0;
  height:var(--foyer-h);
  z-index:500;
  display:none;
}

.foyer .wrap{
  position:absolute;
  inset: 0 0 10px 0;
  display:grid;
  grid-template-columns:1fr 1fr;
  grid-template-rows:auto 1fr;
  border-radius:10px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.25);
  background:#0d2a1e;
}

/* Î¤Î¯Ï„Î»Î¿Î¹ Ï†Î¿Ï…Î±Î³Î¹Î­: Î¯Î´Î¹Î¿ look Î¼Îµ Ï„Î·Î½ Ï„Î±Î¼Ï€Î­Î»Î± Ï„Ï‰Î½ Ï€ÏÎ¬Î¾ÎµÏ‰Î½ (Î¯Î´Î¹Î± Î³ÏÎ±Î¼Î¼Î±Ï„Î¿ÏƒÎµÎ¹ÏÎ¬/Î¼ÎµÎ³Î­Î¸Î·/ÎºÎµÎ½Ï„ÏÎ¬ÏÎ¹ÏƒÎ¼Î±) */
.foyer-titlebar{
  grid-column:1 / span 2;
  grid-row:1;
  justify-self:center;
  align-self:start;
  margin:10px 10px 6px;
  background:rgba(0,0,0,.4);
  border-radius:10px;
  padding:12px 18px;
  color:#ddd;
  font-family:'Georgia',serif;
  text-align:center;
  z-index:2;
  line-height:1.25;
  pointer-events:none;
  max-width:calc(100% - 20px);
}

.foyer-titlebar .ft-line1{
  font-size:28px;
  margin:0;
  color:#fff;
  font-weight:700;
}

.foyer-titlebar .ft-line2{
  font-size:16px;
  font-style:italic;
  margin-top:2px;
  color:#ddd;
}


/* ÎˆÎ½Î´ÎµÎ¹Î¾Î· Î¸ÎµÎ±Ï„Î® ÏƒÏ„Î¿ Ï†Î¿Ï…Î±Î³Î¹Î­ (Î¯Î´Î¹Î¿ â€œpill + avatarâ€ ÏƒÏ„Ï…Î» Î¼Îµ Ï„Î¿ Î’Î¹Î²Î»Î¯Î¿) */
.foyer-speaker-indicator{
  position:absolute;
  left:12px;
  top:12px;
  z-index:3;
  pointer-events:none;
  display:none;
}
.foyer .speaker-badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:2px 8px;
  border-radius:999px;
  background:rgba(229,231,235,0.92);
  font-size:.82rem;
  color:#111827;
  box-shadow:0 6px 16px rgba(0,0,0,.22);
  border:1px solid rgba(255,255,255,.35);
}
.foyer .speaker-avatar{
  width:22px;
  height:22px;
  border-radius:999px;
  background-size:cover;
  background-position:50% 18%;
  background-repeat:no-repeat;
  flex-shrink:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:.8rem;
  font-weight:600;
  color:#f9fafb;
}
.foyer .speaker-name{
  font-weight:500;
}

.foyer .foyer-line-badge-wrap{
  margin:2px 0 6px;
}
.foyer .foyer-line-text{
  min-height:1em;
}

.board-left,
.board-right{
  grid-row:2;
  background:transparent;
  color:#fff;
  padding:10px 10px 8px;
  overflow:auto;
  scroll-behavior:smooth;
  font-size:14px;
  line-height:1.35;
}
.board-left{
  border-right:1px solid rgba(255,255,255,.25);
}
.cell{
  padding:6px 10px;
  border-bottom:1px dashed rgba(255,255,255,.18);
  white-space:pre-wrap;
}


/* ---------- ÎœÎµÏ„Î±Ï†Î¿ÏÎ¬ Ï€ÏÏÎ·Î½ inline styles ---------- */

/* ÎšÎ¿Ï…Î¼Ï€Î¹Î¬ Î³Î»ÏÏƒÏƒÎ±Ï‚ */
.lang-toggle{
  position:absolute;
  top:10px;
  left:10px;
  z-index:2000;
  display:flex;
  gap:6px;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}
.lang-toggle button{
  padding:2px 8px;
  font-size:11px;
  border-radius:4px;
  border:none;
  cursor:pointer;
  opacity:.75;
  background:rgba(0,0,0,.4);
  color:#fff;
}
.lang-toggle button.active{
  opacity:1;
  font-weight:600;
  box-shadow:0 0 0 1px rgba(255,255,255,.7);
  background:rgba(0,0,0,.75);
}

/* Î¦ÏÏ„Î± ÎºÎ¿Î¹Î½Î¿Ï + ÎºÎ¿Ï…ÏÏ„Î¯Î½ÎµÏ‚ dim */
.audience-main,
.audience-extra{
  transition:filter .8s ease;
}
.audience-main.dimmed,
.audience-extra.dimmed{
  filter:brightness(0.5);
}
.curtain-top.dimmed,
.curtain-upper.dimmed,
.curtain-side.dimmed{
  filter:brightness(0.5);
}

/* Avatars: ÎºÎ±Ï„Î±ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ */
.viewers .viewer-avatar.visible{
  opacity:1;
}
.viewers .viewer-avatar.lit{
  filter:brightness(0.8);
}

/* v2 fix: center start button inside startbreak box */
.startbreak .box{ text-align:center; }
.startbreak button,
.startbreak .start-btn{ display:block; margin:0 auto; }


/* ===============================
   EXIT MASK (STROBE EXIT) v4
   - Î Î­Ï„Î±ÏƒÎ¼Î± Î¼Ï€ÏÎ¿ÏƒÏ„Î¬ Î±Ï€ÏŒ Î¿Î¼Î¹Î»Î·Ï„Î­Ï‚
   - Panels/Î³ÏÎ±Ï†Î®Î¼Î±Ï„Î± Î¼Ï€ÏÎ¿ÏƒÏ„Î¬ Î±Ï€ÏŒ Ï€Î­Ï„Î±ÏƒÎ¼Î±
   - Î Î­Ï„Î±ÏƒÎ¼Î± Î±Î³ÎºÏ…ÏÏ‰Î¼Î­Î½Î¿ ÎºÎ¬Ï„Ï‰-Î´ÎµÎ¾Î¹Î¬ (Î´ÎµÎ¾Î¹ÏŒ Ï€Î¬Î½ÎµÎ»/ÎºÎ¿Ï…ÏÏ„Î¯Î½Î±)
   =============================== */

/* Î‘Î½Î­Î²Î±ÏƒÎµ panels/Î³ÏÎ±Ï†Î®Î¼Î±Ï„Î± Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï„Î¿ Ï€Î­Ï„Î±ÏƒÎ¼Î± */
.clock,
.measure-box,
#xtChart,
#xSinChart,
.params-box,
.laws,
.law-charts{
  z-index: 2200;
}

/* Î¤Î¿ Ï€Î­Ï„Î±ÏƒÎ¼Î±: Î´ÎµÎ¾Î¹Î¬ Î¶ÏÎ½Î· (18%), ÎºÎ¬Ï„Ï‰ Î¼Î­ÏÎ¿Ï‚ */
.exit-panel-mask{
  position:fixed;
  bottom:0;

  /* Î“Î©ÎÎ™Î‘ ÎŸÎ˜ÎŸÎÎ—Î£: Î´ÎµÎ¾Î¹Î¬ */
  right:0;

  width:calc(18 * var(--aat-vw0));
  max-width:240px;
  min-width:160px;
  height:calc(46 * var(--aat-vh0));

  /* Î¯Î´Î¹Î¿ look Î¼Îµ Ï„Î± Ï€Î»Î±ÏŠÎ½Î¬ panels/ÎºÎ¿Ï…ÏÏ„Î¯Î½ÎµÏ‚ */
  background:linear-gradient(to left,#300000,#1a0000);
  box-shadow:inset 6px 0 10px rgba(0,0,0,.6);

  /* Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï„Î¿Ï…Ï‚ Î¿Î¼Î¹Î»Î·Ï„Î­Ï‚, ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ panels/Î³ÏÎ±Ï†Î®Î¼Î±Ï„Î± */
  z-index:2100;

  pointer-events:none;
  display:none;
}
.exit-panel-mask.left{
  left:0;
  right:auto;
  background:linear-gradient(to right,#300000,#1a0000);
  box-shadow:inset -6px 0 10px rgba(0,0,0,.6);
}

body.exit-mask-active .exit-panel-mask{
  display:block;
}


/* ===============================
   MARBLE TRACK
   - ÎšÏÏÎ¹Î¿ Î¼Î¬ÏÎ¼Î±ÏÎ¿: -3..+3 (Î¸Î­ÏƒÎ·/Ï€Î»Î¬Ï„Î¿Ï‚ Î´Î¯Î½Î¿Î½Ï„Î±Î¹ Î±Ï€ÏŒ JS)
   - Ghost Î´Î¿ÎºÏŒÏ‚: -5..+5 (Î¼ÏŒÎ½Î¿ ÏŒÏ„Î±Î½ ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ Î¿ ghost)
   - Î Î»Î®ÏÏ‰Ï‚ Î¿ÏÎ¸Î¿Î³ÏÎ½Î¹Î¿ (Ï‡Ï‰ÏÎ¯Ï‚ rounded Î¬ÎºÏÎµÏ‚)
   =============================== */

.marble-track{
  position:absolute;
  display:none;              /* ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ Î±Ï€ÏŒ JS ÏŒÏ„Î±Î½ Î­Ï‡ÎµÎ¹ Î½ÏŒÎ·Î¼Î± */
  pointer-events:none;

  /* Î¿ÏÎ¸Î¿Î³ÏÎ½Î¹Î¿ */
  border-radius:0;

  /* â€œÏ€ÏÎ¬ÏƒÎ¹Î½Î¿ Î¼Îµ Î¬ÏƒÏ€ÏÎ±â€ â€“ marble-ish Î½ÎµÏÎ¬ */
  background:
    repeating-linear-gradient(135deg,
      rgba(255,255,255,.28) 0 6px,
      rgba(255,255,255,0) 6px 20px),
    linear-gradient(90deg,#2f7d57 0%, #2a6f4d 45%, #2f7d57 100%);
  border:1px solid rgba(255,255,255,.22);
  box-shadow:0 6px 18px rgba(0,0,0,.35);

  /* Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï„Î· â€œÎ³ÏÎ±Î¼Î¼Î® Î´Î±Ï€Î­Î´Î¿Ï…â€, ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ Ï„Î¿Î½ Î·Î¸Î¿Ï€Î¿Î¹ÏŒ */
  z-index:156;
}

.marble-track.ghost{
  /* Ï€Î¹Î¿ â€œÏ„ÎµÏ‡Î½Î¹ÎºÏŒâ€/Î´Î¿ÎºÏŒÏ‚ â€“ Î±Ï†Î®Î½Î¿Ï…Î¼Îµ Ï„Î¿ opacity Î½Î± Ï„Î¿ Î¿ÏÎ¯Î¶ÎµÎ¹ Ï„Î¿ JS */
  border:1px dashed rgba(255,255,255,.35);
  box-shadow:none;
  filter:brightness(1.05);
}

/* Ghost marble: make it greyer + more transparent (no size/position changes) */
#marbleTrackGhost,
.marble-track.ghost{
  opacity: 0.45;
  filter: grayscale(1);
}
#marbleTrackGhost{
  /* override vivid green veins with a neutral grey marble look */
  background:
    linear-gradient(180deg, rgba(245,245,245,0.85), rgba(205,205,205,0.85)),
    repeating-linear-gradient(135deg,
      rgba(255,255,255,0.0) 0px,
      rgba(255,255,255,0.0) 10px,
      rgba(255,255,255,0.18) 12px,
      rgba(255,255,255,0.0) 22px
    );
}

/* --- Layer fix: ensure dialogs/bubbles are never covered by the A-Ï‰-Ï†0 params box --- */
/* params box stays aligned with right panels/charts layer */
.params-box, #paramsBox, .paramsPanel{
  z-index: 2199 !important;
}

/* dialog bubbles ABOVE params box (and above panels/charts if they overlap) */
.thought-bubble,
.bubble,
.dialog-bubble,
#bubble,
#bubbleLeft,
#bubbleRight,
#dialogBubble,
#dialogLeft,
#dialogRight{
  z-index: 2300 !important;
}

/* --- Layer tweak: laws panel above the left charts by at least +1 --- */
.law-charts,
#lawCharts,
.left-charts,
.chart-panel-left{
  z-index: 1600 !important;
}

.laws,
#laws,
.laws-panel{
  z-index: 1601 !important;
}






